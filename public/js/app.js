(()=>{"use strict";var e,a={205:()=>{},988:()=>{var e=$('meta[name="csrf-token"]').attr("content"),a=function(a,s){var t=$("#appoint-spiner");$.ajax({url:"slots",type:"post",data:{adate:a,atime:s},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),t.removeClass("d-none")},complete:function(){t.addClass("d-none")},success:function(e){$("#timeslot-avail").text(e.message)},error:function(e){var a=e.responseJSON;switch(e.status){case 422:var s=a.errors;for(var t in a.message,s)$("#"+t).addClass("is-invalid").next().text(s[t][0]);var n=Object.keys(s)[0];if(n.includes(".")){var r=n.split(".");$("."+r[0]).eq(r[1]).focus()}else $("#"+Object.keys(s)[0]).focus();break;case 404:e.statusText;break;case 500:0}}})},s=function(a,s,t,n,r){var o=$("#appoint-spiner");$.ajax({url:"30c234cc35caba164c8dbd3837a0c55a/pull-slots",type:"post",data:{departmentid:a,transaction_type_id:s,bin:t,adate:n,atime:r},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),o.removeClass("d-none")},complete:function(){o.addClass("d-none")},success:function(e){$("#timeslot-avail").text(e.message)},error:function(e){var a=e.responseJSON;switch(e.status){case 422:var s=a.errors;for(var t in a.message,s)$("#"+t).addClass("is-invalid").next().text(s[t][0]);var n=Object.keys(s)[0];if(n.includes(".")){var r=n.split(".");$("."+r[0]).eq(r[1]).focus()}else $("#"+Object.keys(s)[0]).focus();break;case 404:e.statusText;break;case 500:0}}})};$(document).ready(function(t){$("body").on("change","#atime",function(e){var s=$("#adate").val(),t=$(this).val();a(s,t)}),$("body").on("input","#adate",function(e){var s=$(this).val(),t=$("#atime").val();a(s,t)}),$("body").on("submit","#master-form",function(a){a.preventDefault(),a.stopPropagation();var s=$(this);$("#departmentid").val(),$("#transaction_type_id").val();if(s.removeClass("was-validated"),$(".form-control").removeClass("is-invalid"),0==s[0].checkValidity())s.addClass("was-validated");else{var t=$("#alert-box-form"),n=$("#btn-submit-appointment"),r=$("#submit-spiner");$.ajax({url:"save",type:"post",data:s.serialize(),headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),t.addClass("d-none"),r.removeClass("d-none"),n.attr("disabled",!0)},complete:function(){r.addClass("d-none"),n.attr("disabled",!1)},success:function(e){var a=e.message,s=e.slot_message;e.error?(t.removeClass("alert-success d-none").addClass("alert-danger").html(a),$("#timeslot-avail").text(s),$(window).scrollTop(0)):(t.removeClass("alert-danger d-none").addClass("alert-success").html(a),$("#timeslot-avail").text(s),$(".aptrefno").text(e.ref_no),$(".aptadate").text(e.adate),$(".aptatime").text(e.atime.split("-")[0].trim()),$(".apttrans").text(e.trans),$(".apteid").text(e.eid),$("#modal-qr-img").attr("src",e.qr_url),$("#as-modal").modal("show"),$("#master-form")[0].reset())},error:function(e){var a,s=e.responseJSON;switch(e.status){case 422:var n=s.errors;for(var r in a=s.message,n)$("#"+r).addClass("is-invalid").parent().find(".invalid-feedback").text(n[r][0]);var o=Object.keys(n)[0];if(o.includes(".")){var i=o.split(".");$("."+i[0]).eq(i[1]).focus()}else $("#"+Object.keys(n)[0]).focus();break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(t).removeClass("alert-success d-none").addClass("alert-danger").text(a),$(window).scrollTop(0)}})}});var n=0;$("body").on("click","#cancel-find-info",function(a){var s=$("#reference_code");if(n=s.val().trim(),s.parent().removeClass("is-invalid"),""==n)s.addClass("is-invalid");else{var t=$("#info-box"),r=$("#alert-box-form"),o=$("#search-spiner"),i=$("#submit-cancel");$.ajax({url:"search-info",type:"post",data:{reference_code:n},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){s.removeClass("is-invalid"),o.removeClass("d-none"),t.addClass("d-none"),r.addClass("d-none")},complete:function(){o.addClass("d-none")},success:function(e){var a=e.message,s=e.fullname;e.error?(t.removeClass("alert-primary d-none").addClass("alert-danger").find("h4").text("Sorry").end().find("p").html(a),i.attr("disabled",!0)):(t.removeClass("alert-danger d-none").addClass("alert-primary").find("h4").text("Hi "+s+",").end().find("p").html(a),i.attr("disabled",!1))},error:function(e){var a,s=e.responseJSON;switch(e.status){case 422:var t=s.errors;for(var n in a=s.message,t)$("#"+n).parent().addClass("is-invalid").next().text(t[n][0]);break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(r).removeClass("alert-success d-none").addClass("alert-danger").text(a)}})}}),$("body").on("click","#submit-cancel",function(a){a.preventDefault(),console.log("✅ Button clicked");var s=$("#alert-box-form"),t=$("#submit-cancel-spiner"),r=$(this);$.ajax({url:"cancel",type:"post",data:{reference_code:n},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){t.removeClass("d-none")},complete:function(){t.addClass("d-none")},success:function(e){e.error?s.removeClass("alert-success d-none").addClass("alert-danger").text(e.message):s.removeClass("alert-danger d-none").addClass("alert-success").text(e.message),r.attr("disabled",!0)},error:function(e){var a,t=e.responseJSON;switch(e.status){case 422:var n=t.errors;for(var r in a=t.message,n)$("#"+r).addClass("is-invalid").next().text(n[r][0]);break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(s).removeClass("alert-success d-none").addClass("alert-danger").text(a)}})}),$("body").on("click","#submit-accept",function(e){e.preventDefault(),$("#reference_codes").val()?$.ajax({url:acceptUrl,type:"POST",data:{reference_code:$("#reference_codes").val(),_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){alert(e.message),e.error||(window.location.href=slotViewerUrl)},error:function(e){console.error("❌ AJAX Error:",e.responseText)}}):alert("Reference code is required")}),$("body").on("submit","#health-mainfrm",function(a){a.preventDefault(),a.stopPropagation();var s=$(this);if(s.removeClass("was-validated"),$(".form-control").removeClass("is-invalid"),$(".custom-feedback").remove(),$("#tbl-yes-no tr").each(function(e,a){0==$(this).find("input:radio").is(":checked")&&$(this).find("td:first-child").append('<div class="invalid-feedback d-block custom-feedback">Please choose whether OO/HINDI.</div>')}),0==s[0].checkValidity())s.addClass("was-validated"),$(".form-control:invalid").eq(0).focus();else{var t=$("#alert-box-form"),n=$("#health-submit-btn"),r=$("#submit-spiner");$.ajax({url:"health/save",type:"post",data:s.serialize(),headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),t.addClass("d-none"),r.removeClass("d-none"),n.attr("disabled",!0)},complete:function(){r.addClass("d-none"),n.attr("disabled",!1)},success:function(e){var a=e.message;e.error?t.removeClass("alert-success d-none").addClass("alert-danger").html(a):t.removeClass("alert-danger d-none").addClass("alert-success").html(a),$(window).scrollTop(0)},error:function(e){var a,s=e.responseJSON;switch(e.status){case 422:var n=s.errors;for(var r in a=s.message,n)$("#"+r).addClass("is-invalid").parent().find(".invalid-feedback").text(n[r][0]);var o=Object.keys(n)[0];if(o.includes(".")){var i=o.split(".");$("."+i[0]).eq(i[1]).focus()}else $("#"+Object.keys(n)[0]).focus();break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(t).removeClass("alert-success d-none").addClass("alert-danger").text(a)}})}}),$("body").on("click",".linked-text",function(e){var a=$(this).attr("name"),s=$(this).data("allow-txt");$("#"+a+"ans").prop("disabled",!s).focus()}),$("body").on("change","#departmentid",function(){var e=$(this).val(),a=$("#transaction_type_id"),s=$("#transaction_spinner");$("#bin, #business_name").toggleClass("d-none",2!=e&&23!=e),$(".department-alert-active").addClass("d-none").removeClass(".department-alert-active"),$(".department-alert[data-alert-id="+e+"]").addClass(".department-alert-active").removeClass("d-none"),$.ajax({url:"dropdowns/transaction-types?department_id="+e,beforeSend:function(){a.prop("disabled",!0),s.removeClass("d-none")},complete:function(){a.prop("disabled",!1),s.addClass("d-none")},success:function(e){for(var a=e.results.length,s=0;s<a;s++)e.results[s].id,e.results[s].text}})}),$("#cancel-find-infos").on("click",function(e){e.preventDefault();var a=$("#reference_codes").val().trim();if(""===a)return alert("Please enter a reference code before searching."),!1;window.open(verificationUrl+"/"+a,"_self")});var r=$("#transaction_type_id").data("old");r&&($("#departmentid").change(function(e,a){setTimeout(function(){"function"==typeof a&&a()},800)}),$("#departmentid").trigger("change",function(){$("#transaction_type_id").val(r),$("#transaction_type_id").trigger("change")})),$("body").on("change","#walk_in_atime",function(e){var a=$("#walk_in_adate").val(),t=$(this).val(),n=$("#departmentid").val(),r=$("#transaction_type_id").val(),o=$("#bin").val();s(n,r,o,a,t)}),$("body").on("input","#walk_in_adate",function(e){var a=$(this).val(),t=$("#walk_in_atime").val(),n=$("#departmentid").val(),r=$("#transaction_type_id").val(),o=$("#bin").val();s(n,r,o,a,t)}),$("body").on("change","#transaction_type_id",function(e){var a=$(this).val();console.log(a);var s=$("#bin"),t=$("#business_name");8==a||16==a?(s.closest(".input-group").addClass("d-none"),t.prop("readonly",!1)):(s.closest(".input-group").removeClass("d-none"),t.prop("readonly",!0))})}),$(".use-daterangepicker").each(function(){$(this).daterangepicker()}),$("#sdate").on("change",function(){var e=$(this).val();$.ajax({url:window.slotviewerUrl,type:"GET",data:{sdate:e},dataType:"json",success:function(e){var a=$("#slot-list");a.empty(),e.count.length>0?$.each(e.count,function(e,s){a.append('\n                            <li class="list-group-item d-flex justify-content-between align-items-center">\n                               <h4> '.concat(s.atime.split("-")[0].trim(),'</h4>\n                                <span class="badge badge-primary badge-pill">\n                                   <h4> <strong>').concat(s.Total,"</strong></h4>\n                                </span>\n                            </li>\n                        "))}):a.append('<li class="list-group-item">No appointments found</li>')},error:function(e,a,s){console.error("Error:",s)}})})}},s={};function t(e){var n=s[e];if(void 0!==n)return n.exports;var r=s[e]={exports:{}};return a[e](r,r.exports,t),r.exports}t.m=a,e=[],t.O=(a,s,n,r)=>{if(!s){var o=1/0;for(c=0;c<e.length;c++){for(var[s,n,r]=e[c],i=!0,l=0;l<s.length;l++)(!1&r||o>=r)&&Object.keys(t.O).every(e=>t.O[e](s[l]))?s.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var d=n();void 0!==d&&(a=d)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,n,r]},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={847:0,252:0};t.O.j=a=>0===e[a];var a=(a,s)=>{var n,r,[o,i,l]=s,d=0;if(o.some(a=>0!==e[a])){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(l)var c=l(t)}for(a&&a(s);d<o.length;d++)r=o[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},s=self.webpackChunk=self.webpackChunk||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))})(),t.O(void 0,[252],()=>t(988));var n=t.O(void 0,[252],()=>t(205));n=t.O(n)})();