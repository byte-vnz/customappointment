(()=>{"use strict";var e,a={205:()=>{},988:()=>{var e=$('meta[name="csrf-token"]').attr("content"),a=function(a,t,n,s,r){var o=$("#appoint-spiner");$.ajax({url:"30c234cc35caba164c8dbd3837a0c55a/pull-slots",type:"post",data:{departmentid:a,transaction_type_id:t,bin:n,adate:s,atime:r},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),o.removeClass("d-none")},complete:function(){o.addClass("d-none")},success:function(e){$("#timeslot-avail").text(e.message)},error:function(e){var a=e.responseJSON;switch(e.status){case 422:var t=a.errors;for(var n in a.message,t)$("#"+n).addClass("is-invalid").next().text(t[n][0]);var s=Object.keys(t)[0];if(s.includes(".")){var r=s.split(".");$("."+r[0]).eq(r[1]).focus()}else $("#"+Object.keys(t)[0]).focus();break;case 404:e.statusText;break;case 500:0}}})};$(document).ready(function(t){var n=$("#adate"),s=(new Date).toISOString().split("T")[0];n.attr("min",s),n.on("input change",function(){0===new Date(n.val()).getDay()&&(n.val(""),Swal.fire({icon:"warning",title:"Oops...",text:"Sundays are not allowed. Please select a different date.",confirmButtonText:"Okay"}))}),$("body").on("submit","#master-form",function(a){a.preventDefault(),a.stopPropagation();var t=$(this);$("#departmentid").val(),$("#transaction_type_id").val();if(t.removeClass("was-validated"),$(".form-control").removeClass("is-invalid"),0==t[0].checkValidity())t.addClass("was-validated");else{var n=$("#alert-box-form"),s=$("#btn-submit-appointment"),r=$("#submit-spiner");$.ajax({url:"save",type:"post",data:t.serialize(),headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),n.addClass("d-none"),r.removeClass("d-none"),s.attr("disabled",!0)},complete:function(){r.addClass("d-none"),s.attr("disabled",!1)},success:function(e){var a=e.message,t=e.slot_message;e.error?(n.removeClass("alert-success d-none").addClass("alert-danger").html(a),$("#timeslot-avail").text(t),$(window).scrollTop(0),Swal.fire({icon:"error",title:"Error!",html:a,confirmButtonText:"Okay"}),$("#adate").val(""),$("#atime").val(""),$("#slot-remaining").addClass("d-none")):(n.removeClass("alert-danger d-none").addClass("alert-success").html(a),$("#timeslot-avail").text(t),$(".aptrefno").text(e.ref_no),$(".aptadate").text(e.adate),$(".aptatime").text(e.atime.split("-")[0].trim()),$(".apttrans").text(e.trans),$(".apteid").text(e.eid),$("#modal-qr-img").attr("src",e.qr_url),$("#as-modal").modal("show"),$("#master-form")[0].reset(),$("#slot-remaining").addClass("d-none"),Swal.fire({icon:"success",title:"Success!",html:a,confirmButtonText:"Okay"}))},error:function(e){var a,t=e.responseJSON;switch(e.status){case 422:var n=t.errors;for(var s in a=t.message,n)$("#"+s).addClass("is-invalid").parent().find(".invalid-feedback").text(n[s][0]);var r=Object.keys(n)[0];if(r.includes(".")){var o=r.split(".");$("."+o[0]).eq(o[1]).focus()}else $("#"+Object.keys(n)[0]).focus();break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}Swal.fire({icon:"error",title:"Error!",html:a,confirmButtonText:"Okay"})}})}});var r=0;$("body").on("click","#cancel-find-info",function(a){var t=$("#reference_code");if(r=t.val().trim(),t.parent().removeClass("is-invalid"),""==r)t.addClass("is-invalid");else{var n=$("#info-box"),s=$("#alert-box-form"),o=$("#search-spiner"),i=$("#submit-cancel");$.ajax({url:"search-info",type:"post",data:{reference_code:r},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){t.removeClass("is-invalid"),o.removeClass("d-none"),n.addClass("d-none"),s.addClass("d-none")},complete:function(){o.addClass("d-none")},success:function(e){var a=e.message,t=e.fullname;e.error?(n.removeClass("alert-primary d-none").addClass("alert-danger").find("h4").text("Sorry").end().find("p").html(a),i.attr("disabled",!0)):(n.removeClass("alert-danger d-none").addClass("alert-primary").find("h4").text("Hi "+t+",").end().find("p").html(a),i.attr("disabled",!1))},error:function(e){var a,t=e.responseJSON;switch(e.status){case 422:var n=t.errors;for(var r in a=t.message,n)$("#"+r).parent().addClass("is-invalid").next().text(n[r][0]);break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(s).removeClass("alert-success d-none").addClass("alert-danger").text(a)}})}}),$("body").on("click","#submit-cancel",function(a){a.preventDefault(),console.log("✅ Button clicked");var t=$("#alert-box-form"),n=$("#submit-cancel-spiner"),s=$(this);$.ajax({url:"cancel",type:"post",data:{reference_code:r},headers:{"X-CSRF-TOKEN":e},beforeSend:function(){n.removeClass("d-none")},complete:function(){n.addClass("d-none")},success:function(e){e.error?t.removeClass("alert-success d-none").addClass("alert-danger").text(e.message):t.removeClass("alert-danger d-none").addClass("alert-success").text(e.message),s.attr("disabled",!0)},error:function(e){var a,n=e.responseJSON;switch(e.status){case 422:var s=n.errors;for(var r in a=n.message,s)$("#"+r).addClass("is-invalid").next().text(s[r][0]);break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(t).removeClass("alert-success d-none").addClass("alert-danger").text(a)}})}),$("body").on("click","#submit-accept",function(e){e.preventDefault(),$("#reference_codes").val()?$.ajax({url:acceptUrl,type:"POST",data:{reference_code:$("#reference_codes").val(),_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){Swal.fire({icon:"success",title:"Success!",text:e.message}).then(function(){e.error||(window.location.href=slotViewerUrl)})},error:function(e){Swal.fire({icon:"error",title:"AJAX Error",text:e.responseText}),console.error("❌ AJAX Error:",e.responseText)}}):Swal.fire({icon:"error",title:"Oops...",text:"Reference code is required!"})}),$("body").on("submit","#health-mainfrm",function(a){a.preventDefault(),a.stopPropagation();var t=$(this);if(t.removeClass("was-validated"),$(".form-control").removeClass("is-invalid"),$(".custom-feedback").remove(),$("#tbl-yes-no tr").each(function(e,a){0==$(this).find("input:radio").is(":checked")&&$(this).find("td:first-child").append('<div class="invalid-feedback d-block custom-feedback">Please choose whether OO/HINDI.</div>')}),0==t[0].checkValidity())t.addClass("was-validated"),$(".form-control:invalid").eq(0).focus();else{var n=$("#alert-box-form"),s=$("#health-submit-btn"),r=$("#submit-spiner");$.ajax({url:"health/save",type:"post",data:t.serialize(),headers:{"X-CSRF-TOKEN":e},beforeSend:function(){$(".form-control").removeClass("is-invalid"),n.addClass("d-none"),r.removeClass("d-none"),s.attr("disabled",!0)},complete:function(){r.addClass("d-none"),s.attr("disabled",!1)},success:function(e){var a=e.message;e.error?n.removeClass("alert-success d-none").addClass("alert-danger").html(a):n.removeClass("alert-danger d-none").addClass("alert-success").html(a),$(window).scrollTop(0)},error:function(e){var a,t=e.responseJSON;switch(e.status){case 422:var s=t.errors;for(var r in a=t.message,s)$("#"+r).addClass("is-invalid").parent().find(".invalid-feedback").text(s[r][0]);var o=Object.keys(s)[0];if(o.includes(".")){var i=o.split(".");$("."+i[0]).eq(i[1]).focus()}else $("#"+Object.keys(s)[0]).focus();break;case 404:a=e.statusText;break;case 500:a="Oops! There's something wrong."}$(n).removeClass("alert-success d-none").addClass("alert-danger").text(a)}})}}),$("body").on("click",".linked-text",function(e){var a=$(this).attr("name"),t=$(this).data("allow-txt");$("#"+a+"ans").prop("disabled",!t).focus()}),$("body").on("change","#departmentid",function(){var e=$(this).val(),a=$("#transaction_type_id"),t=$("#transaction_spinner");$("#bin, #business_name").toggleClass("d-none",2!=e&&23!=e),$(".department-alert-active").addClass("d-none").removeClass(".department-alert-active"),$(".department-alert[data-alert-id="+e+"]").addClass(".department-alert-active").removeClass("d-none"),$.ajax({url:"dropdowns/transaction-types?department_id="+e,beforeSend:function(){a.prop("disabled",!0),t.removeClass("d-none")},complete:function(){a.prop("disabled",!1),t.addClass("d-none")},success:function(e){for(var a=e.results.length,t=0;t<a;t++)e.results[t].id,e.results[t].text}})}),$("#cancel-find-infos").on("click",function(e){e.preventDefault();var a=$("#reference_codes").val().trim();if(""===a)return alert("Please enter a reference code before searching."),!1;window.open(verificationUrl+"/"+a,"_self")});var o=$("#transaction_type_id").data("old");o&&($("#departmentid").change(function(e,a){setTimeout(function(){"function"==typeof a&&a()},800)}),$("#departmentid").trigger("change",function(){$("#transaction_type_id").val(o),$("#transaction_type_id").trigger("change")})),$("body").on("change","#walk_in_atime",function(e){var t=$("#walk_in_adate").val(),n=$(this).val(),s=$("#departmentid").val(),r=$("#transaction_type_id").val(),o=$("#bin").val();a(s,r,o,t,n)}),$("body").on("input","#walk_in_adate",function(e){var t=$(this).val(),n=$("#walk_in_atime").val(),s=$("#departmentid").val(),r=$("#transaction_type_id").val(),o=$("#bin").val();a(s,r,o,t,n)}),$("body").on("change","#transaction_type_id",function(e){var a=$(this).val();console.log(a);var t=$("#bin"),n=$("#business_name");8==a||16==a?(t.closest(".input-group").addClass("d-none"),n.prop("readonly",!1)):(t.closest(".input-group").removeClass("d-none"),n.prop("readonly",!0))})});var t={};$("#adate").on("change",function(){var e=$(this).val();e?$.ajax({url:window.remainingCountsUrl,type:"GET",data:{adate:e},success:function(e){t={},$.each(e,function(e,a){var n=a.timeslot.trim();t[n]=a.Remaining}),$("#slot-remaining").removeClass("d-none"),$("#atime").trigger("change")}}):$("#slot-remaining").text("").hide()}),$("#atime").on("change",function(){var e=$(this).val();$("#adate").val()&&void 0!==t[e]?$("#slot-remaining").text("(".concat(t[e]," slots left)")).show():$("#slot-remaining").text("").hide()}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;$.ajax({url:window.remainingCountsUrl,type:"GET",data:e?{adate:e}:{},success:function(e){t={};var a=$("#atime");a.empty(),$.each(e,function(e,n){var s=n.timeslot.trim(),r=s.split("-")[0].trim();t[s]=n.Remaining,a.append('<option value="'.concat(s,'">').concat(r,"</option>"))}),a.trigger("change")},error:function(e){console.error("Failed to fetch timeslots:",e.responseText)}})}(),$(".use-daterangepicker").each(function(){$(this).daterangepicker()}),$("#sdate").on("change",function(){var e=$(this).val();window.currentRequest&&window.currentRequest.abort();var a=$("#slot-list");a.empty().append('<li class="list-group-item">Loading...</li>'),window.currentRequest=$.ajax({url:window.slotviewerUrl,type:"GET",data:{sdate:e},dataType:"json",success:function(e){a.empty(),e.count.length>0?$.each(e.count,function(e,t){a.append('\n                        <li class="list-group-item d-flex justify-content-between align-items-center">\n                            <h4>'.concat(t.atime.split("-")[0].trim(),'</h4>\n                            <span class="badge badge-primary badge-pill">\n                                <h4><strong>').concat(t.Total,"</strong></h4>\n                            </span>\n                        </li>\n                    "))}):a.append('<li class="list-group-item">No appointments found</li>');var t=null!==e.total&&void 0!==e.total?e.total:0;$("#grand-total").text(t)},error:function(e,a,t){"abort"!==a&&console.error("Error:",t)}})})}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var r=t[e]={exports:{}};return a[e](r,r.exports,n),r.exports}n.m=a,e=[],n.O=(a,t,s,r)=>{if(!t){var o=1/0;for(c=0;c<e.length;c++){for(var[t,s,r]=e[c],i=!0,l=0;l<t.length;l++)(!1&r||o>=r)&&Object.keys(n.O).every(e=>n.O[e](t[l]))?t.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var d=s();void 0!==d&&(a=d)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,s,r]},n.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={847:0,252:0};n.O.j=a=>0===e[a];var a=(a,t)=>{var s,r,[o,i,l]=t,d=0;if(o.some(a=>0!==e[a])){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var c=l(n)}for(a&&a(t);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},t=self.webpackChunk=self.webpackChunk||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})(),n.O(void 0,[252],()=>n(988));var s=n.O(void 0,[252],()=>n(205));s=n.O(s)})();